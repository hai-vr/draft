<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Avatars 3.0: Animated Animator Parameters, and Smoothing</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
}

.simple-table-header {
	background: rgb(247, 246, 243);
	color: black;
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(145, 145, 142, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(187, 132, 108, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(215, 129, 58, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 148, 51, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(108, 155, 125, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(91, 151, 189, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(167, 130, 195, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(205, 116, 159, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(225, 111, 100, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(145, 145, 142, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(187, 132, 108, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(215, 129, 58, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 148, 51, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(108, 155, 125, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(91, 151, 189, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(167, 130, 195, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(205, 116, 159, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(225, 111, 100, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="f128c71d-d318-4c2b-b61a-4cff8296ada5" class="page sans"><header><div class="page-header-icon undefined"><span class="icon">🔀</span></div><h1 class="page-title">Avatars 3.0: Animated Animator Parameters, and Smoothing</h1></header><div class="page-body"><nav id="556d71cd-d111-455c-a739-dea6c121b279" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#7a0a7be7-8116-4a1a-92c2-536e91210a8d">Animated Animator Parameter (AAP)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#3cdd9ebe-823d-4e9c-ba10-253127911ab7">AAP - Remember a value</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#78682d3e-3d1f-4938-a66b-0cc9de55711d">AAP - Copy a VRChat parameter</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#db0e5f8e-4b45-453e-b5e7-385afc8c7ead">AAP - Remapping a value from [0, 1] to [X, Y]</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#aeb2d0d5-4edf-41e1-a846-818657dfc1b7">AAP - Smoothing a value</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#a3b4fb9e-7f19-4853-883a-680a6c6a969f">AAP - Framerate detection</a></div></nav><h2 id="7a0a7be7-8116-4a1a-92c2-536e91210a8d" class="">Animated Animator Parameter (AAP)</h2><p id="7de85287-add9-4eea-bf3f-0ea59ce6eb7e" class="">Float Animator parameters can be animated by an animation.</p><figure id="e1ce2aed-1771-4645-8fd1-a0d1a48e4331" class="image"><a href="Avatars%203%200%20Animated%20Animator%20Parameters,%20and%20Smoo%20f128c71dd3184c2bb61a4cff8296ada5/Untitled.png"><img style="width:1170px" src="Avatars%203%200%20Animated%20Animator%20Parameters,%20and%20Smoo%20f128c71dd3184c2bb61a4cff8296ada5/Untitled.png"/></a></figure><p id="e73155ef-ec9c-4dc0-a88a-a4aa02b01cb0" class="">Using these are some useful applications such as:</p><ul id="82862824-2dbf-4078-8cb7-b106f76f9ec6" class="bulleted-list"><li style="list-style-type:disc">Remembering a float value set by VRChat.</li></ul><ul id="0f0ae7ea-9e11-4b60-b779-2102ba1afbf1" class="bulleted-list"><li style="list-style-type:disc">Smoothing a value with fake interpolation using a feedback loop.</li></ul><ul id="26df7be6-6f3c-4327-9a84-f78e2dd48183" class="bulleted-list"><li style="list-style-type:disc">Use that float value in animator state conditions. Animations can encode information in these floats, such as<em> whether this is an animation that closes the player&#x27;s eyes</em>. This information can then be used to animate another part of the animator, for example that enables or disables eye tracking for all eyes closed animations.</li></ul><p id="d488ab04-5d91-4736-aa55-dda64c62ab66" class="">Animators parameters that are animated this way have the following caveats:</p><ul id="2950d7e7-5809-41ea-a758-6fe64c9c61f3" class="bulleted-list"><li style="list-style-type:disc">A value will be forced to be applied even if the animator is not actively in a state that animates it.</li></ul><ul id="6ae47af6-7b97-43c9-87eb-5d7db78158d1" class="bulleted-list"><li style="list-style-type:disc">The value is only applied to that animator, and not any other animator (i.e. if this is on the FX layer, the value it will not be replicated on the Gesture layer).</li></ul><ul id="5d500c07-3248-4e7e-a33d-c1214bd4a730" class="bulleted-list"><li style="list-style-type:disc">VRCAvatarParameterDrivers will not be able to affect the value on that animator.</li></ul><p id="b6374d80-1834-4579-aa98-cf88ec51b592" class="">Some additional tricks related to <em>Animated Animator Parameters</em> are described in this page. They will be referred under the <strong>AAP</strong> acronym.</p><h2 id="3cdd9ebe-823d-4e9c-ba10-253127911ab7" class="">AAP - Remember a value</h2><p id="37dd62af-1cb9-4ba0-8889-bab8bd1d7474" class="">If the value is between 0 and 1, you can use an animation with Normalized Time to save the last known value.</p><p id="a0fbdd81-3c90-4094-bd00-354483480596" class="">Set the Normalized Time parameter to be the same as the parameter that is being animated. This is a basic feedback loop.</p><p id="ca482cca-e223-446e-b70c-62bcc6b36d60" class="">Create an animation that animates the parameter from 0 to 1, and make sure the curve shape is set to be linear.</p><figure id="f1970fad-90e2-42a5-87cf-6523195e005b" class="image"><a href="Avatars%203%200%20Animated%20Animator%20Parameters,%20and%20Smoo%20f128c71dd3184c2bb61a4cff8296ada5/Untitled%201.png"><img style="width:995px" src="Avatars%203%200%20Animated%20Animator%20Parameters,%20and%20Smoo%20f128c71dd3184c2bb61a4cff8296ada5/Untitled%201.png"/></a></figure><h2 id="78682d3e-3d1f-4938-a66b-0cc9de55711d" class="">AAP - Copy a VRChat parameter</h2><p id="e67140ed-99bd-41f8-beda-69fe7e99298f" class="">Using the same technique as above (<em>Remember a value</em>), you can use an animation with Normalized Time to copy a VRChat parameter.</p><p id="41a5ecd8-9e76-48f9-855a-db389d8b3266" class="">Set the Normalized Time parameter to be the VRChat parameter to be copied.</p><p id="19fe140f-358f-41c8-a4c0-ed8a5ed15dfe" class="">If the input range is outside 0 and 1, you may try to use a blend tree to do the same.</p><p id="68cd5158-c7fe-4cae-acfd-4237bd8721b4" class="">When combined with <em>Remember a value</em> above, this is useful to save the last known value of VRChat&#x27;s GestureLeftWeight and GestureRightWeight when exiting a Fist gesture.</p><h2 id="db0e5f8e-4b45-453e-b5e7-385afc8c7ead" class="">AAP - Remapping a value from [0, 1] to [X, Y]</h2><p id="09c1e53b-7a78-4b71-bce6-fae4622779e5" class="">When dealing with a value from 0 to 1, it may be sometimes needed to remap it to a value from -1 to 1, or inversely.</p><p id="1007a0de-792c-41ea-848d-ed422cb716cf" class="">Using the same technique as <em>Remember a value</em>, you can use an animation with Normalized Time to copy a VRChat parameter.</p><p id="0565d496-2ca1-430a-a515-f53598e30801" class="">Create an animation that animates the parameter from X to Y, and make sure the curve shape is set to be linear.</p><p id="272b9915-ea5b-4f20-bffc-0dd9dc1f268a" class="">If the input range is outside 0 and 1, you may try to use a blend tree to do the same.</p><h2 id="aeb2d0d5-4edf-41e1-a846-818657dfc1b7" class="">AAP - Smoothing a value</h2><p id="ac91b5ff-7d56-4792-acce-45435d26a296" class="">Smoothing a value can be done using 3 blend trees.</p><p id="1f990b32-aaf6-488a-a93a-1392c903cdde" class="">This is done by implementing the following formula with blend trees:</p><p id="eaf4701e-a7e2-4aa3-bbbc-846a0da0a488" class=""><code>CurrentValue = (CurrentValue) * SmoothingAmount + (WantedValue) * (1 - SmoothingAmount)</code></p><p id="5b045a4b-f583-4a02-83ab-24b380d0fd64" class="">The value of <code>SmoothingAmount</code> determines how slowly the value is smoothed.
With a value of 0.7, 70% of the previous value is carried over with 30% of the wanted value for every rendered frame.</p><ul id="bab007df-5cf3-474b-bce5-f883c036109f" class="bulleted-list"><li style="list-style-type:disc">The first blend tree uses <code>SmoothingAmount</code> as the input:<ul id="c5e10010-5aa5-457a-ab64-ccc1e853324e" class="bulleted-list"><li style="list-style-type:circle">At position 0.0: This is where you put the <code>(CurrentValue)</code> blend tree described below.</li></ul><ul id="562fd858-b1bc-44a3-9695-aa1a22bf1559" class="bulleted-list"><li style="list-style-type:circle">At position 1.0: This is where you put the <code>(WantedValue)</code> blend tree described below.</li></ul></li></ul><ul id="ccc6f674-7f11-4291-92f1-48db8a09fc67" class="bulleted-list"><li style="list-style-type:disc">The second blend tree is <code>(CurrentValue)</code>, which is implemented using the same technique as <em>Remember a value</em> but using a Blend Tree instead of Normalized time.
This Blend Tree uses <code>CurrentValue</code> as the input, and has two animations:<ul id="cae86f43-b04f-4138-baf3-fd8067404bb0" class="bulleted-list"><li style="list-style-type:circle">At position 0.0: There is an animation that animates <code>CurrentValue</code> to 0.</li></ul><ul id="2583519a-bcfa-48a3-98c7-d7225ff4aab8" class="bulleted-list"><li style="list-style-type:circle">At position 1.0: There is an animation that animates <code>CurrentValue</code> to 1.</li></ul></li></ul><ul id="6bd8827d-e9e7-4152-9b77-eda893f967b1" class="bulleted-list"><li style="list-style-type:disc">The third blend tree is <code>(WantedValue)</code>, which is implemented similarly:
This Blend Tree uses <code>WantedValue</code> as the input, and has two animations:<ul id="d160960a-d135-4935-8596-0512382f3800" class="bulleted-list"><li style="list-style-type:circle">At position 0.0: There is an animation that animates <code>CurrentValue</code> to 0.</li></ul><ul id="13f5571e-b782-49ef-9ef7-4b2b58cd9750" class="bulleted-list"><li style="list-style-type:circle">At position 1.0: There is an animation that animates <code>CurrentValue</code> to 1.</li></ul></li></ul><p id="81c44021-91c7-4630-95ea-3d40e17aacb1" class="">The value of <code>SmoothingAmount</code> must be set in the Animator itself as the default value. For extra safety, you can choose to force it using a VRCAvatarParameterDriver but it&#x27;s not necessary.</p><p id="8f4b998d-a85d-4940-9298-ab43b903109a" class="">This is framerate-dependent. The faster the rendering, the faster it smoothes.</p><p id="d3c9fe3c-7b89-4097-b423-93f1d5468a08" class="">It is possible to make it somewhat framerate-resistant by animating the <code>SmoothingAmount</code> using a Framerate detection animator.</p><h2 id="a3b4fb9e-7f19-4853-883a-680a6c6a969f" class="">AAP - Framerate detection</h2><p id="e6a1266c-43c8-4acd-8097-4d00dbed6d8d" class="">Detecting the framerate is possible because of the following.</p><ul id="d9278887-dc1b-43f3-bc74-c49270a14378" class="bulleted-list"><li style="list-style-type:disc">Animations advance by the frame time. If a frame takes 0.2 seconds to render, the animation will be at 0.2.</li></ul><ul id="ef08f36f-065c-4b99-9766-67e0f0803e6e" class="bulleted-list"><li style="list-style-type:disc">Animators may only change state once per frame, and this is evaluated every frame.</li></ul><p id="e0f90090-c88a-45db-a926-669210a33f53" class="">By combining the two above, it is possible to reset an animation every frame and measure how much the animation has advanced using an AAP.</p><p id="83416ba1-67e3-4a42-8de2-eab0b8d325b6" class="">Todo:</p><ul id="76a3d520-fde8-4e09-8255-5bafd7cc69e1" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked">The process of how to actually do it is not described here yet.</span></li></ul><p id="600f4481-0e0b-4442-b556-cc4e649c41f2" class="">
</p></div></article></body></html>